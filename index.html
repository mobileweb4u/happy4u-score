<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>HAPPY4U Scoreboard v2.4.4</title>

<link rel="icon" type="image/png" href="favicon.png">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ff44">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon-192.png">

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
/* --- UNIVERSAL RESPONSIVE FIXES v2.4.4 --- */
:root {
    /* Clamped values: (min, preferred, max) - This makes text scale perfectly */
    --text-main: clamp(0.8rem, 2vw, 1.2rem);
    --text-score: clamp(4rem, 15vw, 10rem);
    --text-btn: clamp(0.7rem, 1.5vw, 1rem);
}

body {
    display: flex;
    flex-direction: column;
    height: 100vh;
    margin: 0;
    overflow: hidden; /* Stops the whole page from bouncing */
    background: #000;
}

header { 
    flex-shrink: 0; 
    padding: 10px;
}

/* Brand scaling */
.brand { font-size: clamp(1rem, 3vw, 2rem) !important; }
.title { font-size: clamp(1.2rem, 4vw, 2.5rem) !important; }

.scoreboard {
    flex: 1; /* Fills the middle space */
    display: flex;
    overflow-y: auto; /* Allows scrolling inside the score area if screen is too short */
    padding-bottom: 80px; 
}

.player-column {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

/* Responsive Scores */
.score-display {
    font-size: var(--text-score) !important;
    line-height: 1;
}

/* Responsive Buttons */
.btn-plus {
    font-size: var(--text-btn);
    padding: clamp(10px, 2vh, 20px) clamp(20px, 4vw, 40px);
    width: 85%;
    max-width: 300px;
}

/* PINNED BOTTOM NAVIGATION */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: clamp(60px, 8vh, 80px); /* Taller on tablets */
    background: rgba(0, 0, 0, 0.95);
    display: flex !important;
    justify-content: space-around;
    align-items: center;
    border-top: 1px solid #333;
    z-index: 9999;
    padding-bottom: env(safe-area-inset-bottom);
}

.nav-icon {
    font-size: clamp(1.2rem, 3vw, 2rem);
    padding: 15px; /* Larger invisible tap area for fingers */
}

/* Version Badge */
.version-badge {
    font-size: clamp(0.6rem, 1.5vw, 0.9rem);
    background: rgba(57, 255, 20, 0.1);
    color: #39ff14;
    padding: 3px 8px;
    border: 1px solid #39ff14;
    border-radius: 4px;
    font-weight: bold;
    text-shadow: 0 0 5px #39ff14;
}

#rotation-warning {
    display: none;
    position: fixed;
    inset: 0;
    background: #000;
    color: #39FF14;
    z-index: 100000;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

@media (orientation: portrait) {
    #rotation-warning { display: flex; }
}

.menu-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
}

.menu-btn { font-size: 0.75rem; padding: 12px 4px; }
</style>
</head>
<body>
<div id="rotation-warning">
<i class="fas fa-sync-alt fa-3x" style="margin-bottom: 20px;"></i>
<h2>PLEASE ROTATE DEVICE</h2>
<p>Landscape mode is required for the scoreboard.</p>
</div>

<header>
<h1 class="brand">HAPPY4U <span id="header-v-badge" class="version-badge">v2.4.4</span></h1>
<h1 class="title" id="main-title">Race To</h1>
<button id="end-game-btn" class="end-game">END GAME</button>
</header>

<div class="ticker-wrap">
<div class="ticker" id="news-ticker">
<span>NEWS FLASH:</span> MATCH STARTING...
&nbsp;&nbsp;&nbsp; ‚Ä¢ &nbsp;&nbsp;&nbsp;
RACE TO 3 IN PROGRESS...
</div>
</div>

<main class="scoreboard">
<section class="player-column" id="p1-section">
<h2 class="player-name">
<span id="p1-break-indicator" style="visibility: hidden; color: var(--neon-magenta); margin-right: 10px;">‚òÖ BREAK</span>
<span id="p1-name-display">Player 1</span>
</h2>
<div class="match-wins">Races Won: <span id="p1-matches">0</span></div>
<div class="score-box" id="p1-box">
<div class="score-display" id="p1-score">0</div>
</div>
<div class="dish-stats">Break Dishes: <span id="p1-dishes">0</span></div>
<div class="dish-stats">Reverse Dishes: <span id="p1-rev-dishes">0</span></div>
<div style="margin-top: 10px;">
<button class="btn-plus" data-player="p1">WIN FRAME</button>
</div>
</section>

<section class="player-column" id="p2-section">
<h2 class="player-name">
<span id="p2-name-display">Player 2</span>
<span id="p2-break-indicator" style="visibility: hidden; color: var(--neon-magenta); margin-left: 10px;">‚òÖ BREAK</span>
</h2>
<div class="match-wins">Races Won: <span id="p2-matches">0</span></div>
<div class="score-box" id="p2-box">
<div class="score-display" id="p2-score">0</div>
</div>
<div class="dish-stats">Break Dishes: <span id="p2-dishes">0</span></div>
<div class="dish-stats">Reverse Dishes: <span id="p2-rev-dishes">0</span></div>
<div style="margin-top: 10px;">
<button class="btn-plus" data-player="p2">WIN FRAME</button>
</div>
</section>
</main>

<div id="setup-modal" class="modal-overlay">
<div class="modal-content">
<h2>MATCH SETUP</h2>
<div class="input-group" style="margin-bottom: 15px;">
<label>PLAYER 1 NAME</label>
<input type="text" id="p1-input" placeholder="Enter Name">
</div>
<div class="input-group" style="margin-bottom: 15px;">
<label>PLAYER 2 NAME</label>
<input type="text" id="p2-input" placeholder="Enter Name">
</div>
<div class="input-group" style="margin-bottom: 20px;">
<label>RACE TO</label>
<input type="number" id="race-input" value="3">
</div>
<div style="display: flex; flex-direction: row; gap: 10px; width: 100%;">
<button id="save-setup-btn" class="menu-btn" style="flex: 1;">SAVE & START</button>
<button id="exit-setup-btn" class="menu-btn" style="flex: 1; border-color: #ff4444; color: #ff4444;">EXIT</button>
</div>
</div>
</div>

<div id="info-modal" class="modal-overlay" style="display:none;">
<div class="modal-content info-menu">
<h2 style="color: var(--neon-magenta); margin-bottom: 20px;">MAIN MENU</h2>
<div class="menu-grid">
<button class="menu-btn">GAME MODE</button>
<button class="menu-btn" id="open-setup-from-menu">MATCH SETUP</button>
<button class="menu-btn" id="open-history-btn">SUMMARY</button>
<button class="menu-btn" id="open-drills-btn" style="border-color: var(--neon-green); color: var(--neon-green);">PRACTICE DRILLS</button>
<button class="menu-btn" id="share-app-btn">SHARE APP LINK</button>
<button class="menu-btn" id="open-qr-btn" style="border-color: gold; color: gold;">OPEN QR SYNC</button>
<button class="menu-btn" id="install-pwa-btn" style="display:none; border-color: #00ff44; color: #00ff44;">INSTALL APP</button>
<button class="menu-btn">SHOT CLOCK</button>
<button class="menu-btn" id="open-about-btn">ABOUT</button>
<button id="close-info-btn">CLOSE</button>
</div>
</div>
</div>

<div id="about-modal" class="modal-overlay" style="display:none;">
<div class="modal-content">
<h2 style="color: var(--neon-magenta);">ABOUT SCOREBOARD</h2>
<p style="color: white; margin: 10px 0;">Version: <span id="about-v-badge" class="version-badge">v2.4.4</span></p>
<div style="margin-bottom: 20px; background: #111; padding: 10px; border-radius: 8px;">
<span id="storage-info" style="color: #888; font-size: 0.75rem;">Storage: Calculating...</span>
<button id="factory-reset-btn" class="reset-storage-btn">CLEAR DATA</button>
</div>
<p style="color: #666; font-size: 0.7rem; margin-bottom: 20px;">Created by Freddie Russell</p>
<div style="display: flex; flex-direction: column; gap: 10px;">
<button id="update-app-btn" class="menu-btn" style="border-color: var(--neon-green); color: var(--neon-green);">CHECK FOR UPDATES</button>
<button id="close-about-btn" class="menu-btn" style="border-color: #ff4444; color: #ff4444;">CLOSE</button>
</div>
</div>
</div>

<footer class="bottom-nav">
<span class="nav-icon">üè†</span>
<span class="nav-icon info-icon">‚ìò</span>
<span class="nav-icon star-icon">‚òÖ</span>
<span class="nav-icon">üë§</span>
</footer>

<script src="script.js"></script>
</body>
</html>
